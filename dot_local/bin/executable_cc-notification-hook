#!/usr/bin/env bash
# Claude Code notification hook

# Extract message from JSON and send notification
message=$(jq -r .message)

# Check if Ghostty is the frontmost application
frontmost_app=$(osascript -e 'tell application "System Events" to get name of first application process whose frontmost is true' 2>/dev/null || echo "")

if [ "$frontmost_app" = "ghostty" ]; then
    # Ghostty is active - no sound
    terminal-notifier -title 'Claude Code' -subtitle 'Notification' -message "$message" -activate com.mitchellh.ghostty
else
    # Ghostty is not active - play sound
    terminal-notifier -title 'Claude Code' -subtitle 'Notification' -message "$message" -sound 'Hero' -activate com.mitchellh.ghostty
fi
